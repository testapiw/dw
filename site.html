<html>
<head>
<title>Site</title>
<style>
table.t1 {
	border-top: 1px #990000 dotted;
	border-bottom: 1px #990000 dotted;
}
th.t1 {
	border-left: 1px #990000 dotted;
	border-right: 1px #990000 dotted;
}
td.t1 {
	border-top: 1px #009900 dotted;
	border-left: 1px #009900 dotted;
	border-right: 1px #009900 dotted;
}
table.t2 {
	border-top: 1px #6311C6 dotted;
	border-bottom: 1px #6311C6 dotted;
}
th.t2 {
	border-left: 1px #6311C6 dotted;
	border-right: 1px #6311C6 dotted;
}
td.t2 {
	border-top: 1px #01ACBA dotted;
	border-left: 1px #01ACBA dotted;
	border-right: 1px #01ACBA dotted;
}
</style>
</head>

<!-- js: code run 848 beta-gun -->
<body>

<table width="300" class="t1">
	<tr>
		<th class="t1">1</th>
		<th class="t1">2</th>
		<th class="t1">3</th>
	</tr>
	<tr>
		<td class="t1">Vasya</td>
		<td class="t1">28.34</td>
		<td class="t1">-15.48</td>
	</tr>
	<tr>
		<td class="t1">Petya</td>
		<td class="t1">140.02</td>
		<td class="t1">29</td>
	</tr>
	<tr>
		<td class="t1">Masha</td>
		<td class="t1">-2.09</td>
		<td class="t1">-37.03</td>
	</tr>
</table>
<script type="text/javascript">
;(function(win, doc){
    
    // lib
    function xhr(m,u,c,x){
            with(new(this.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP"))
            onreadystatechange=function(x){readyState^4||c(x)},open(m,u),send(c)
    }
    
///    xhr('get', 'http://localhost:8383/TEST/site.html', function(xhr){
 //       console.log( xhr.currentTarget.response, xhr )
 //   })
    
    //HTMLElement.prototype
    var element = (function () {
        var 
            el=[], cache = {},
            isTag = ["button","div","tr","td"]
        ;
        

        
        var getter = function () {
                var 
                    elem, s, p,
                    fn  = {
                        '.' : 'getElementsByClassName',
                        '#' : 'getElementById',
                        '_' : 'getElementsByTagName'
                    };
                    
                function getelement (child, parent) {
                    var p = (child.match(/^[.#]/)||['_'])[0];
                    return ((elem = parent[ fn[p] ]( child.replace(/[.#]/,'') )).length <=1 ) 
                        ? (elem||[])[0] : elem;
                }                  
        
                return function(selector) {
                        var elem, s,
                            parent=doc;
  
                        s = selector.split('>').reverse();
                        
                        if (s.length>1) {
                            parent = getelement(s[1], doc);
                        }
                        
                        return getelement(s[0], parent);
                   } 
         }();
        
        function is (name, isAllow) {
             return (isAllow.indexOf(name)+1) ? true : false;
        }
        
        function addAttr (attr) {
            var
                k,
                isAllow = ["onclick","appendChild",
                       "id","name","title","className","innerHTML"]
                ;
            for (k in attr) {
                    if (isAllow.indexOf(k)+1) {
                        (typeof element[0][k] !== 'function')
                            ? element[0][k] = attr[k]
                            : element[0][k](attr[k]);
                    }
            } 
        
            return element[0];                
        }     
        
        
        
        return {
       
            get : function (name, parent) {
                    var nc =name+ parent;
                    element[0] = (cache[nc]) 
                        ? cache[nc] 
                        : getter(name, parent);
                    return this;
            },
            
            
            /*
             * parent, child: type - string or HTMLElement
             */
            insert : function (parent, child) {
                    
                    var p, ch = null, _el = el;
                    
                    if (child) { 
                        ch = getter(child); 
                    }
                    
                    p = getter(parent)
                    if (element[0].length>1) return this;
                    p.insertBefore(element[0], ch);
                    return this;
            },
            
            create  : function (tag, attr) {
                    
                    if (isTag.indexOf(tag.toLowerCase())+1) {
                        element[0] = doc.createElement(tag);
                        addAttr(attr);
                    }
                    
                    return this;
            },
            
            clone   : function (attr) {
                    
                    if (element[0].length>1) return this;
                    element[0] = element[0].cloneNode(true);
                    addAttr(attr);
                    return this;
            }
            
        };
 
    })();
       
        
    
      var z = element.create("div", {id:"wrapper"}).insert('body', 'script');
       
            z.create('button', 
                    {  
                        name:'test3', title:"dfgdf",
                        appendChild: doc.createTextNode(  'name2'  ),
                        onclick : function(){
                                console.log(this);
                                element.get('table').clone({className:"t2", }).insert('#wrapper')
                               // table.get('.t2').shuffle([1,3,2]);
                                
                        }
                    })
                .insert('#wrapper');
        
       
	
})(window, document)
</script>
</body>
</html>